[gd_scene load_steps=41 format=3 uid="uid://bf0xn1nu8efx6"]

[ext_resource type="Script" uid="uid://cayhaxw20tdab" path="res://addons/dragonforge_character_3d/player/player.gd" id="1_dv4av"]
[ext_resource type="Script" uid="uid://5yf80g6w8vpf" path="res://addons/dragonforge_character_3d/resources/stat_resource.gd" id="2_8u0bd"]
[ext_resource type="Resource" uid="uid://dqdha4ppdu8ox" path="res://addons/dragonforge_character_3d/resources/speed_stat.tres" id="4_888vx"]
[ext_resource type="PackedScene" uid="uid://rwb2mk1st7sw" path="res://addons/dragonforge_camera/cameras.tscn" id="6_888vx"]
[ext_resource type="PackedScene" uid="uid://cir34yinpdk3t" path="res://test/mage_rig.tscn" id="6_hcl30"]
[ext_resource type="Script" uid="uid://i0o4sv7i7cp0" path="res://addons/dragonforge_state_machine/state_machine.gd" id="6_qt5xv"]
[ext_resource type="Script" uid="uid://c1thh75h6yiwh" path="res://addons/dragonforge_character_3d/player/player_idle_state.gd" id="7_2tumd"]
[ext_resource type="PackedScene" uid="uid://bft4rl1dm1p3u" path="res://addons/dragonforge_camera/camera_mount_3d.tscn" id="7_888vx"]
[ext_resource type="Script" uid="uid://d014wx4jia078" path="res://addons/dragonforge_character_3d/player/player_move_state.gd" id="8_2tumd"]
[ext_resource type="Script" uid="uid://rwje4jy4t7p2" path="res://addons/dragonforge_character_3d/player/player_jump_state.gd" id="9_qt5xv"]

[sub_resource type="Resource" id="Resource_2tumd"]
script = ExtResource("2_8u0bd")
stat_type = 1
stat_value = 5.0
metadata/_custom_type_script = "uid://5yf80g6w8vpf"

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5cupu"]
height = 2.4

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_888vx"]
animation = &"Walking_Backwards"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_kmgik"]
animation = &"Running_Strafe_Left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_3ne2b"]
animation = &"Running_Strafe_Right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_kx5lt"]
animation = &"Running_A"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jepsa"]
animation = &"Running_B"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_kk0nd"]
animation = &"Walking_A"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ox1mr"]
animation = &"Walking_B"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ewd5d"]
animation = &"Walking_C"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bpia5"]
animation = &"Idle"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_wv7sd"]
blend_point_0/node = SubResource("AnimationNodeAnimation_888vx")
blend_point_0/pos = Vector2(0, -1)
blend_point_1/node = SubResource("AnimationNodeAnimation_kmgik")
blend_point_1/pos = Vector2(-1, 0)
blend_point_2/node = SubResource("AnimationNodeAnimation_3ne2b")
blend_point_2/pos = Vector2(1, 0)
blend_point_3/node = SubResource("AnimationNodeAnimation_kx5lt")
blend_point_3/pos = Vector2(0, 1)
blend_point_4/node = SubResource("AnimationNodeAnimation_jepsa")
blend_point_4/pos = Vector2(0, 0.75)
blend_point_5/node = SubResource("AnimationNodeAnimation_kk0nd")
blend_point_5/pos = Vector2(0, 0.5)
blend_point_6/node = SubResource("AnimationNodeAnimation_ox1mr")
blend_point_6/pos = Vector2(0, 0.25)
blend_point_7/node = SubResource("AnimationNodeAnimation_ewd5d")
blend_point_7/pos = Vector2(0, 0.05)
blend_point_8/node = SubResource("AnimationNodeAnimation_bpia5")
blend_point_8/pos = Vector2(0, 0)
snap = Vector2(0.1, 0.05)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_558o5"]
animation = &"Jump_Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_b7xx1"]
animation = &"Jump_Land"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ar4ly"]
animation = &"Jump_Start"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_daiuc"]
animation = &"Spellcast_Shoot"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_63pba"]
animation = &"Spellcasting"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rxcet"]
animation = &"Use_Item"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5sjg4"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nx6oy"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xnf3q"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_du1n4"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vbr03"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_mnje6"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_4uhw7"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_x2ny4"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pbu2q"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3hsbl"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_v7vyy"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_cooke"]
states/IdleWalkRun/node = SubResource("AnimationNodeBlendSpace2D_wv7sd")
states/IdleWalkRun/position = Vector2(434, 100)
states/Jump_Idle/node = SubResource("AnimationNodeAnimation_558o5")
states/Jump_Idle/position = Vector2(434, -127.135)
states/Jump_Land/node = SubResource("AnimationNodeAnimation_b7xx1")
states/Jump_Land/position = Vector2(549, -32.1347)
states/Jump_Start/node = SubResource("AnimationNodeAnimation_ar4ly")
states/Jump_Start/position = Vector2(318, -32.1347)
states/Spellcast_Shoot/node = SubResource("AnimationNodeAnimation_daiuc")
states/Spellcast_Shoot/position = Vector2(666, 207)
states/Spellcasting/node = SubResource("AnimationNodeAnimation_63pba")
states/Spellcasting/position = Vector2(666, 35)
states/Start/position = Vector2(153, 100)
states/Use_Item/node = SubResource("AnimationNodeAnimation_rxcet")
states/Use_Item/position = Vector2(434, 207)
transitions = ["Start", "IdleWalkRun", SubResource("AnimationNodeStateMachineTransition_5sjg4"), "IdleWalkRun", "Spellcasting", SubResource("AnimationNodeStateMachineTransition_nx6oy"), "Spellcasting", "IdleWalkRun", SubResource("AnimationNodeStateMachineTransition_xnf3q"), "IdleWalkRun", "Spellcast_Shoot", SubResource("AnimationNodeStateMachineTransition_du1n4"), "Spellcast_Shoot", "IdleWalkRun", SubResource("AnimationNodeStateMachineTransition_vbr03"), "IdleWalkRun", "Use_Item", SubResource("AnimationNodeStateMachineTransition_mnje6"), "Use_Item", "IdleWalkRun", SubResource("AnimationNodeStateMachineTransition_4uhw7"), "IdleWalkRun", "Jump_Start", SubResource("AnimationNodeStateMachineTransition_x2ny4"), "Jump_Start", "Jump_Idle", SubResource("AnimationNodeStateMachineTransition_pbu2q"), "Jump_Idle", "Jump_Land", SubResource("AnimationNodeStateMachineTransition_3hsbl"), "Jump_Land", "IdleWalkRun", SubResource("AnimationNodeStateMachineTransition_v7vyy")]
graph_offset = Vector2(-8, -150.821)

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("rig", "animation_tree")]
script = ExtResource("1_dv4av")
rig = NodePath("Mage Rig")
stats = Array[ExtResource("2_8u0bd")]([ExtResource("4_888vx"), SubResource("Resource_2tumd")])
animation_tree = NodePath("AnimationTree")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.2, 0)
shape = SubResource("CapsuleShape3D_5cupu")

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Mage Rig")
tree_root = SubResource("AnimationNodeStateMachine_cooke")
anim_player = NodePath("../Mage Rig/AnimationPlayer")
parameters/IdleWalkRun/blend_position = Vector2(0, -0.001261)

[node name="Cameras" parent="." instance=ExtResource("6_888vx")]

[node name="FirstPerson" parent="Cameras" instance=ExtResource("7_888vx")]
upwards_rotation_limit = -15.0
downwards_rotation_limit = 40.0
first_person = true

[node name="FreeLook" parent="Cameras" instance=ExtResource("7_888vx")]
upwards_rotation_limit = -40.0
downwards_rotation_limit = 15.0

[node name="Follow" parent="Cameras" instance=ExtResource("7_888vx")]

[node name="Fixed" type="Camera3D" parent="Cameras"]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 6, 7)

[node name="ISO" type="Camera3D" parent="Cameras"]
transform = Transform3D(0.707107, -0.353553, 0.612373, 0, 0.866026, 0.5, -0.707107, -0.353553, 0.612373, 5.1, 6, 5.5)
projection = 1
size = 12.644

[node name="BirdsEye" type="Camera3D" parent="Cameras"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 9, 1)

[node name="Player State Machine" type="Node" parent="."]
script = ExtResource("6_qt5xv")
metadata/_custom_type_script = "uid://i0o4sv7i7cp0"

[node name="PlayerIdleState" type="Node" parent="Player State Machine"]
script = ExtResource("7_2tumd")
metadata/_custom_type_script = "uid://c1thh75h6yiwh"

[node name="PlayerMoveState" type="Node" parent="Player State Machine"]
script = ExtResource("8_2tumd")
metadata/_custom_type_script = "uid://d014wx4jia078"

[node name="PlayerJumpState" type="Node" parent="Player State Machine"]
script = ExtResource("9_qt5xv")
metadata/_custom_type_script = "uid://rwje4jy4t7p2"

[node name="Timer" type="Timer" parent="Player State Machine/PlayerJumpState"]
wait_time = 0.05
one_shot = true

[node name="Mage Rig" parent="." instance=ExtResource("6_hcl30")]

[node name="Skeleton3D" parent="Mage Rig/Rig" index="0"]
bones/1/position = Vector3(5.49305e-21, 0.368144, 1.30964e-27)
bones/1/rotation = Quaternion(-1.10983e-10, 0.0431034, 2.56917e-09, 0.999071)
bones/2/rotation = Quaternion(-9.24276e-06, 0.000352966, 1.95356e-05, 1)
bones/3/rotation = Quaternion(-1.99642e-05, -1.07344e-06, -2.18897e-05, 1)
bones/4/position = Vector3(0.212007, 0.134132, 7.93141e-08)
bones/4/rotation = Quaternion(-0.550395, -0.0572923, -0.640553, 0.532423)
bones/5/rotation = Quaternion(4.26136e-08, -3.38174e-08, -0.512094, 0.858929)
bones/7/rotation = Quaternion(-0.320637, -0.338721, 0.147585, 0.872169)
bones/8/position = Vector3(8.34843e-10, 0.0961252, -0.0575)
bones/8/rotation = Quaternion(0.00121677, 0.00121677, -0.702626, 0.711558)
bones/11/position = Vector3(-0.212022, 0.134131, 2.30943e-05)
bones/11/rotation = Quaternion(-0.609706, 0.0774327, 0.615419, 0.493479)
bones/12/rotation = Quaternion(5.159e-08, 5.32946e-08, 0.534689, 0.845049)
bones/14/rotation = Quaternion(-0.319781, 0.314661, -0.229432, 0.863765)
bones/15/position = Vector3(-1.57172e-08, 0.0961251, -0.0575)
bones/15/rotation = Quaternion(0.00375705, 0.00442525, 0.70319, 0.710978)
bones/18/rotation = Quaternion(5.59879e-05, -0.0314126, -2.94044e-06, 0.999507)
bones/21/position = Vector3(0.170945, 0.11356, -2.50295e-05)
bones/21/rotation = Quaternion(0.989384, 0.0837049, 0.078802, 0.0888993)
bones/22/rotation = Quaternion(0.400731, 5.67736e-08, -2.71963e-07, 0.916196)
bones/23/rotation = Quaternion(-0.624471, -0.200211, 0.0777349, 0.750938)
bones/24/rotation = Quaternion(-9.86282e-09, 0.920211, -0.391422, 7.83622e-08)
bones/25/position = Vector3(-0.170945, 0.113587, 2.46664e-05)
bones/25/rotation = Quaternion(0.991131, -0.0334616, 0.0297216, 0.125126)
bones/26/rotation = Quaternion(0.443946, -5.88338e-08, 3.12079e-07, 0.896054)
bones/27/rotation = Quaternion(-0.650148, 0.112227, -0.0238452, 0.751096)
bones/28/rotation = Quaternion(3.03591e-08, 0.920354, -0.391086, -6.95338e-08)
bones/29/rotation = Quaternion(0.707107, -2.29302e-07, -4.60552e-08, 0.707107)
bones/30/position = Vector3(0.202143, 0.0259083, 0.204837)
bones/30/rotation = Quaternion(-0.706804, -7.05557e-08, -7.05013e-08, 0.707409)
bones/31/position = Vector3(1.94393e-08, 0.362833, -2.42861e-15)
bones/31/rotation = Quaternion(9.64586e-09, 1.77733e-09, 0.985755, -0.168187)
bones/32/position = Vector3(-2.60494e-08, 0.213436, -5.15193e-09)
bones/32/rotation = Quaternion(-1.01277e-07, 0.391084, 0.920355, -3.35041e-08)
bones/33/position = Vector3(8.57109e-09, 0.16565, -2.39997e-09)
bones/34/rotation = Quaternion(1, -2.32842e-09, 1.9977e-07, -1.34042e-15)
bones/36/rotation = Quaternion(0.707107, -3.82385e-08, 1.45009e-07, 0.707107)
bones/37/position = Vector3(-0.170945, 0.0261752, 0.24602)
bones/37/rotation = Quaternion(-0.707329, -7.05085e-08, -7.05485e-08, 0.706885)
bones/38/position = Vector3(1.94581e-08, 0.362833, -9.39272e-12)
bones/38/rotation = Quaternion(-5.82856e-09, 6.43028e-10, 0.994823, 0.101628)
bones/39/position = Vector3(-1.11482e-08, 0.213436, 6.7608e-12)
bones/39/rotation = Quaternion(-1.05793e-07, 0.391084, 0.920355, -2.58689e-08)
bones/40/position = Vector3(-6.29249e-09, 0.16565, 2.67495e-09)
bones/41/rotation = Quaternion(1, 3.76051e-09, 1.94879e-07, 7.44119e-09)
bones/43/position = Vector3(0.453507, 1.10648, -0.589231)
bones/43/rotation = Quaternion(-0.707107, -7.27951e-08, -7.27951e-08, 0.707107)
bones/44/position = Vector3(0.520831, 0.771725, -0.0575854)
bones/44/rotation = Quaternion(0.794288, 0.000228964, 0.607542, 0.000197608)
bones/45/position = Vector3(-0.453507, 1.10648, -0.589232)
bones/45/rotation = Quaternion(-0.707107, -7.27951e-08, -7.27951e-08, 0.707107)
bones/46/position = Vector3(-0.510847, 0.771718, 0.0598933)
bones/46/rotation = Quaternion(-0.757811, 0.000449302, 0.652474, -0.000312248)

[node name="Spellbook_Bone" parent="Mage Rig/Rig/Skeleton3D" index="0"]
transform = Transform3D(-3.98892e-05, 0.964985, 0.262304, -0.999923, 0.0031926, -0.0118968, -0.0123179, -0.262284, 0.964912, 0.577011, 0.617041, 0.238937)

[node name="Spellbook_open_Bone" parent="Mage Rig/Rig/Skeleton3D" index="1"]
transform = Transform3D(-3.98892e-05, 0.964985, 0.262304, -0.999923, 0.0031926, -0.0118968, -0.0123179, -0.262284, 0.964912, 0.545443, 0.618473, 0.122809)

[node name="1H_Wand_Bone" parent="Mage Rig/Rig/Skeleton3D" index="2"]
transform = Transform3D(-0.00300496, -0.160662, 0.987004, 0.999953, -0.00944785, 0.0015063, 0.00908349, 0.986963, 0.160683, -0.490308, 0.624738, 0.107968)

[node name="2H_Staff_Bone" parent="Mage Rig/Rig/Skeleton3D" index="3"]
transform = Transform3D(-0.00300496, -0.160662, 0.987004, 0.999953, -0.00944785, 0.0015063, 0.00908349, 0.986963, 0.160683, -0.490308, 0.624738, 0.107968)

[node name="Mage_Hat_Bone" parent="Mage Rig/Rig/Skeleton3D" index="4"]
transform = Transform3D(0.99971, -0.00622614, 0.0232815, -1.04268e-05, 0.96594, 0.258768, -0.0240996, -0.258693, 0.965659, -8.9522e-06, 1.74658, 7.189e-06)

[node name="Mage_Cape_Bone" parent="Mage Rig/Rig/Skeleton3D" index="5"]
transform = Transform3D(0.996223, -3.8143e-07, 0.086828, -4.70956e-06, 1, 5.84282e-05, -0.086828, -5.86165e-05, 0.996223, -1.53004e-05, 1.17835, -1.9999e-05)

[editable path="Mage Rig"]
